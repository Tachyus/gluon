"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Schema;(function(e){var t=function(){function e(){}return e}();e.Parameter=t;var n=function(){function e(){}return e}();e.Method=n;var r=function(){function e(){}return e}();e.EnumCase=r;var i=function(){function e(){}return e}();e.Enum=i;var a=function(){function e(){}return e}();e.Field=a;var o=function(){function e(){}return e}();e.Record=o;var u=function(){function e(){}return e}();e.UnionCase=u;var c=function(){function e(){}return e}();e.Union=c})(Schema=exports.Schema||(exports.Schema={}));var Option;(function(e){function t(e){return e}e.some=t;function n(e){return e!==undefined&&e!==null}e.isSome=n;function r(){return null}e.none=r;function i(e){return e===undefined||e===null}e.isNone=i;function a(e){return n(e)?e[0]:null}e.fromJSON=a;function o(e){return n(e)?[e]:null}e.toJSON=o;function u(e,t){return n(e)?e:t}e.withDefault=u})(Option=exports.Option||(exports.Option={}));var Dict=function(){function e(){this.data={}}e.prototype.check=function(e){if(typeof e!=="string"){throw new Error("Invalid or null key")}};e.prototype.containsKey=function(e){this.check(e);return this.data.hasOwnProperty(e)};e.prototype.forEach=function(e){for(var t in this.data){if(this.data.hasOwnProperty(t)){e(t,this.data[t])}}};e.prototype.copy=function(){var t=new e;this.forEach(function(e,n){return t.setAt(e,n)});return t};e.prototype.at=function(e){this.check(e);if(this.data.hasOwnProperty(e)){return this.data[e]}else{throw new Error("Missing key: "+e)}};e.prototype.tryFind=function(e){this.check(e);return this.data.hasOwnProperty(e)?this.data[e]:null};e.prototype.setAt=function(e,t){this.check(e);this.data[e]=t};e.prototype.toJSON=function(){return this.data};return e}();exports.Dict=Dict;var DataType;(function(e){function t(e){switch(e.tag){case"ArrayType":return[e.Item];case"ListType":return[e.Item];case"OptionType":return[e.Item];case"SequenceType":return[e.Item];case"StringDictType":return[e.Item];case"TupleType":return e.Item;default:return[]}}e.children=t})(DataType||(DataType={}));function defaultVisitor(){return{visitDataType:function(e){},visitRecord:function(e){},visitUnion:function(e){},visitEnum:function(e){}}}function visitDataType(e,t){t.visitDataType(e);DataType.children(e).forEach(function(e){return visitDataType(e,t)})}function visitTypes(e,t){function n(e){visitDataType(e.FieldType,t)}function r(e){t.visitRecord(e);e.RecordFields.forEach(n)}function i(e){e.CaseFields.forEach(n)}function a(e){t.visitUnion(e);e.UnionCases.forEach(i)}function o(e){t.visitEnum(e)}function u(e){switch(e.tag){case"DefineUnion":return a(e.Item);case"DefineRecord":return r(e.Item);case"DefineEnum":return o(e.Item);default:throw new Error("match failed")}}e.forEach(u)}function visitServiceMethods(e,t){function n(e){visitDataType(e.ParameterType,t)}function r(e){e.MethodParameters.forEach(n);if(e.MethodParameters.length>1){var r=tupleType(e.MethodParameters.map(function(e){return e.ParameterType}));visitDataType(r,t)}if(!!e.MethodReturnType){visitDataType(e.MethodReturnType,t)}}e.forEach(r)}function dataTypeKey(e){function t(e){switch(e.tag){case"ArrayType":return[":array",t(e.Item)];case"BooleanType":return":bool";case"BytesType":return":bytes";case"DateTimeType":return":datetime";case"DoubleType":return":double";case"IntType":return":int";case"JsonType":return":json";case"ListType":return[":list",t(e.Item)];case"OptionType":return[":option",t(e.Item)];case"SequenceType":return[":seq",t(e.Item)];case"StringDictType":return[":sdict",t(e.Item)];case"StringType":return":str";case"TupleType":return[":tup"].concat(e.Item.map(function(e){return t(e)}));case"TypeReference":return e.Item;default:throw new Error("match failed")}}return JSON.stringify(t(e))}function typeDefName(e){switch(e.tag){case"DefineEnum":return e.Item.EnumName;case"DefineRecord":return e.Item.RecordName;case"DefineUnion":return e.Item.UnionName;default:throw new Error("match failed")}}function findTypeDefinition(e,t){return e.TypeDefinitions.filter(function(e){return typeDefName(e)===t})[0]}var booleanSerializer={init:function(e){},toJSON:function(e){return e},fromJSON:function(e){return e}};function serializeNumber(e){if(isFinite(e)){return e}else{return String(e)}}function deserializeNumber(e){return Number(e)}var numberSerializer={init:function(e){},toJSON:serializeNumber,fromJSON:deserializeNumber};var dateSerializer={init:function(e){},toJSON:function(e){var t=e.toISOString();if(e.unspecified){t=t.substring(0,t.length-1)}return t},fromJSON:function(e){var t=e.charAt(e.length-1).toLowerCase()!="z";var n=new Date(e);n.unspecified=t;return n}};var rawJsonSerializer={init:function(e){},toJSON:function(e){return e},fromJSON:function(e){return e}};function b64encode(e){var t="";for(var n=0;n<e.length;n++){t=t+String.fromCharCode(e[n])}return btoa(t)}function b64decode(e){var t=atob(e);var n=new Uint8Array(t.length);for(var r=0;r<n.length;r++){n[r]=t.charCodeAt(r)}return n}var bytesSerializer={init:function(e){},toJSON:function(e){return b64encode(e)},fromJSON:function(e){return b64decode(e)}};var stringSerializer={init:function(e){},toJSON:function(e){return e},fromJSON:function(e){return e}};var ArraySerializer=function(){function e(e){this.element=e}e.prototype.init=function(e){this.inner=e.getSerializer(this.element)};e.prototype.toJSON=function(e){var t=this;return e.map(function(e){return t.inner.toJSON(e)})};e.prototype.fromJSON=function(e){var t=this;return e.map(function(e){return t.inner.fromJSON(e)})};return e}();var DictSerializer=function(){function e(e){this.element=e}e.prototype.init=function(e){this.inner=e.getSerializer(this.element)};e.prototype.toJSON=function(e){var t=this;var n={};e.forEach(function(e,r){n[e]=t.inner.toJSON(r)});return n};e.prototype.fromJSON=function(e){var t=new Dict;for(var n in e){t.setAt(n,this.inner.fromJSON(e[n]))}return t};return e}();var OptionSerializer=function(){function e(e){this.element=e}e.prototype.init=function(e){this.inner=e.getSerializer(this.element)};e.prototype.toJSON=function(e){return e===null?null:[this.inner.toJSON(e)]};e.prototype.fromJSON=function(e){return e===null?null:this.inner.fromJSON(e[0])};return e}();var TupleSerializer=function(){function e(e){this.elements=e}e.prototype.length=function(){return this.elements.length};e.prototype.init=function(e){this.inner=this.elements.map(function(t){return e.getSerializer(t)})};e.prototype.toJSON=function(e){var t=this.length();var n=new Array(t);for(var r=0;r<t;r++){n[r]=this.inner[r].toJSON(e[r])}return n};e.prototype.fromJSON=function(e){var t=this.length();var n=new Array(t);for(var r=0;r<t;r++){n[r]=this.inner[r].fromJSON(e[r])}return n};return e}();function buildDataTypeSerializer(e){switch(e.tag){case"ArrayType":return new ArraySerializer(e.Item);case"ListType":return new ArraySerializer(e.Item);case"SequenceType":return new ArraySerializer(e.Item);case"BooleanType":return booleanSerializer;case"BytesType":return bytesSerializer;case"DateTimeType":return dateSerializer;case"DoubleType":return numberSerializer;case"IntType":return numberSerializer;case"JsonType":return rawJsonSerializer;case"OptionType":return new OptionSerializer(e.Item);case"StringDictType":return new DictSerializer(e.Item);case"StringType":return stringSerializer;case"TupleType":return new TupleSerializer(e.Item);default:throw new Error("Invalid DataType")}}var TypeRegistry=function(){function e(){this.activators=new Dict}e.prototype.registerActivators=function(e){var t=this;e.forEach(function(e){t.activators.setAt(e.typeId,e)})};e.prototype.fullCaseName=function(e,t){var n=e.lastIndexOf(".");if(n===-1){return t}else{return e.substr(0,n)+"."+t}};e.prototype.createRecord=function(e,t){return this.activators.at(e).createInstance(t)};e.prototype.createUnion=function(e,t,n){return this.activators.at(this.fullCaseName(e,t)).createInstance(n)};return e}();var EnumSerializer=function(){function e(){}e.prototype.init=function(e){};e.prototype.toJSON=function(e){return e};e.prototype.fromJSON=function(e){return e};return e}();var RecordSerializer=function(){function e(e,t){this.record=e;this.typeRegistry=t}e.prototype.init=function(e){this.fields=this.record.RecordFields.map(function(t){return{name:t.FieldName,ser:e.getSerializer(t.FieldType)}})};e.prototype.toJSON=function(e){var t={};this.fields.forEach(function(n){t[n.name]=n.ser.toJSON(e[n.name])});return t};e.prototype.fromJSON=function(e){var t=this.fields.length;var n=new Array(t);for(var r=0;r<t;r++){var i=this.fields[r];n[r]=i.ser.fromJSON(e[i.name])}return this.typeRegistry.createRecord(this.record.RecordName,n)};return e}();var FieldInfo=function(){function e(){}return e}();var CaseInfo=function(){function e(){}return e}();var UnionSerializer=function(){function e(e,t){this.union=e;this.typeRegistry=t}e.prototype.init=function(e){this.cases=this.union.UnionCases.map(function(t){return{caseName:t.CaseName,fields:t.CaseFields.map(function(t){return{fieldName:t.FieldName,fieldSerializer:e.getSerializer(t.FieldType)}})}})};e.prototype.findCase=function(e){for(var t=0;t<this.cases.length;t++){var n=this.cases[t];if(n.caseName===e){return n}}};e.prototype.toJSON=function(e){var t=typeof e==="string";var n=t?e:e.tag;var r=this.findCase(n);if(r!==undefined){if(t){return[n]}else{var i=new Array(r.fields.length+1);i[0]=n;for(var a=0;a<r.fields.length;a++){var o=r.fields[a];var u=e[o.fieldName];i[a+1]=o.fieldSerializer.toJSON(u)}return i}}return null};e.prototype.fromJSON=function(e){var t=this.findCase(e[0]);if(t!==undefined){var n=new Array(e.length-1);for(var r=0;r<n.length;r++){var i=t.fields[r];n[r]=i.fieldSerializer.fromJSON(e[r+1])}return this.typeRegistry.createUnion(this.union.UnionName,t.caseName,n)}else{return null}};return e}();function typeReference(e){return{tag:"TypeReference",Item:e}}function tupleType(e){return{tag:"TupleType",Item:e}}var SerializerService=function(){function e(){this.dict=new Dict;this.registry=new TypeRegistry}e.prototype.add=function(e,t){var n=dataTypeKey(e);this.dict.setAt(n,t)};e.prototype.getSerializer=function(e){var t=dataTypeKey(e);return this.dict.at(t)};e.prototype.contains=function(e){var t=dataTypeKey(e);return this.dict.containsKey(t)};e.prototype.init=function(){var e=this;this.dict.forEach(function(t,n){n.init(e)})};e.prototype.registerActivators=function(e){this.registry.registerActivators(e)};e.prototype.createVisitor=function(){var e=this;var t=defaultVisitor();var n=function(t){if(!e.contains(t)){e.add(t,buildDataTypeSerializer(t))}};t.visitDataType=function(e){if(e.tag!=="TypeReference"){n(e)}};t.visitRecord=function(t){var n=typeReference(t.RecordName);e.add(n,new RecordSerializer(t,e.registry))};t.visitUnion=function(t){var n=typeReference(t.UnionName);e.add(n,new UnionSerializer(t,e.registry))};t.visitEnum=function(t){var n=typeReference(t.EnumName);e.add(n,new EnumSerializer)};return t};e.prototype.registerTypes=function(e){visitTypes(e,this.createVisitor());this.init()};e.prototype.registerServiceMethods=function(e){visitServiceMethods(e,this.createVisitor());this.init()};return e}();var Client=function(){function e(e,t){if(e===void 0){e=new JQueryClient}this.httpClient=e;if(!t){this.prefix="/gluon-api"}else{this.prefix=t}}return e}();exports.Client=Client;var JQueryClient=function(){function e(){}e.prototype.httpGet=function(e,t,n){return jQuery.ajax({url:e,type:"get",data:t}).then(function(e){return n(e)})};e.prototype.httpCall=function(e,t,n,r){var i={url:t,type:e};if(Option.isSome(n)){i.data=n;i.dataType="json";i.contentType="application/json"}var a=jQuery.ajax(i);if(Option.isSome(r)){return a.then(function(e){return r(e)})}else{return a}};return e}();var Remoting;(function(e){function t(e){switch(e){case"Get":return"get";case"Delete":return"delete";case"Post":return"post";case"Put":return"put";default:throw new Error("match failed")}}function n(e){switch(e.tag){case"HttpCallingConvention":return e.Item1;default:throw new Error("match failed")}}function r(e){switch(e.tag){case"HttpCallingConvention":return e.path;default:throw new Error("match failed")}}function i(e,t){return e.prefix+"/"+r(t.CallingConvention)}function a(e,t,n){var r={};t.innerMethod.MethodParameters.forEach(function(e,i){r[e.ParameterName]=JSON.stringify(t.parameterSerializers[i].toJSON(n[i]))});return r}function o(e,t,n){var r;if(t.arity==0){return null}else if(t.arity==1){r=n[0]}else{r=n}return JSON.stringify(t.jointParametersSerializer.toJSON(r))}function u(e,r,u){function c(e){if(r.doesReturn){var t=r.returnTypeSerializer.fromJSON(e);return t}else{return e}}var s=i(e,r.innerMethod);var p=n(r.innerMethod.CallingConvention);switch(p){case"Get":var l=a(e,r,u);return e.httpClient.httpGet(s,l,c);default:var f=o(e,r,u);return e.httpClient.httpCall(t(p),s,f,c)}}e.remoteCall=u})(Remoting||(Remoting={}));var RemoteMethodProxy=function(){function e(e,t){this.innerMethod=t;this.arity=t.MethodParameters.length;switch(this.arity){case 0:break;case 1:var n=e.getSerializer(t.MethodParameters[0].ParameterType);this.jointParametersSerializer=n;this.parameterSerializers=[n];break;default:this.parameterSerializers=t.MethodParameters.map(function(t){return e.getSerializer(t.ParameterType)});this.jointParametersSerializer=e.getSerializer(tupleType(t.MethodParameters.map(function(e){return e.ParameterType})));break}if(!!t.MethodReturnType){this.doesReturn=true;this.returnTypeSerializer=e.getSerializer(t.MethodReturnType)}else{this.doesReturn=false}}e.prototype.call=function(e,t){return Remoting.remoteCall(e,this,t)};return e}();var MethodBuilder=function(){function e(e){this.factory=e;this.table=new Dict}e.prototype.registerService=function(e){var t=this;e.Methods.forEach(function(e){var n=new RemoteMethodProxy(t.factory,e);t.table.setAt(e.MethodName,n)})};e.prototype.getProxy=function(e){return this.table.at(e)};e.prototype.remoteMethod=function(e){var t=this;return function(n){var r=t.getProxy(e);function i(){var e=arguments;return r.call(n,e)}return i}};return e}();var RawSchemaJsonParser;(function(e){function t(e,t){return e[t+1]}function n(e){var t=e;return t.slice(1)}function r(e){return e[0]}function i(e){switch(r(e)){case"ArrayType":return{tag:"ArrayType",Item:i(t(e,0))};case"BooleanType":return{tag:"BooleanType"};case"BytesType":return{tag:"BytesType"};case"DateTimeType":return{tag:"DateTimeType"};case"DoubleType":return{tag:"DoubleType"};case"IntType":return{tag:"IntType"};case"JsonType":return{tag:"JsonType"};case"ListType":return{tag:"ListType",Item:i(t(e,0))};case"OptionType":return{tag:"OptionType",Item:i(t(e,0))};case"SequenceType":return{tag:"SequenceType",Item:i(t(e,0))};case"StringDictType":return{tag:"StringDictType",Item:i(t(e,0))};case"StringType":return{tag:"StringType"};case"TupleType":return{tag:"TupleType",Item:t(e,0).map(i)};case"TypeReference":return{tag:"TypeReference",Item:t(e,0)};default:throw new Error("failed to parse a data type")}}function a(e){return{FieldName:e.FieldName,FieldType:i(e.FieldType)}}function o(e){return{RecordName:e.RecordName,RecordFields:e.RecordFields.map(a)}}function u(e){return{CaseName:e.CaseName,CaseFields:e.CaseFields.map(a)}}function c(e){return{UnionName:e.UnionName,UnionCases:e.UnionCases.map(u)}}function s(e){return{EnumCaseName:e.EnumCaseName,EnumCaseValue:e.EnumCaseValue}}function p(e){return{EnumName:e.EnumName,EnumCases:e.EnumCases.map(s)}}function l(e){switch(r(e)){case"DefineRecord":return{tag:"DefineRecord",Item:o(t(e,0))};case"DefineUnion":return{tag:"DefineUnion",Item:c(t(e,0))};case"DefineEnum":return{tag:"DefineEnum",Item:p(t(e,0))};default:throw new Error("error parsing type definition")}}e.parseTypeDefinition=l;function f(e){return{ParameterName:e.ParameterName,ParameterType:i(e.ParameterType)}}function m(e){var t=r(e);switch(t){case"Delete":return t;case"Get":return t;case"Post":return t;case"Put":return t;default:throw new Error("error parsing http method")}}function y(e){switch(r(e)){case"HttpCallingConvention":return{tag:"HttpCallingConvention",Item1:m(t(e,0)),path:t(e,1)};default:throw new Error("error parsing calling convention")}}function d(e,t){return e===null?null:t(e[0])}function h(e){var t=y(e.CallingConvention);var n=e.MethodName;var r=e.MethodParameters.map(f);var a=d(e.MethodReturnType,i);return{CallingConvention:t,MethodName:n,MethodParameters:r,MethodReturnType:a}}function T(e){return{Methods:e.Methods.map(h),TypeDefinitions:e.TypeDefinitions.map(l)}}e.parseServiceSchema=T})(RawSchemaJsonParser||(RawSchemaJsonParser={}));var Internals;(function(e){var t=new SerializerService;var n=new MethodBuilder(t);function r(e,n){return t.getSerializer({tag:"TypeReference",Item:e}).toJSON(n)}e.toJSON=r;function i(e,n){return t.getSerializer({tag:"TypeReference",Item:e}).fromJSON(n)}e.fromJSON=i;function a(e){var n=[];function r(e,t){n.push({typeId:i,createInstance:function(e){return t.apply(null,e)}})}for(var i in e){r(i,e[i])}t.registerActivators(n)}e.registerActivators=a;function o(e){var n=e.map(RawSchemaJsonParser.parseTypeDefinition);t.registerTypes(n)}e.registerTypeDefinitions=o;function u(e){var r=RawSchemaJsonParser.parseServiceSchema(e);t.registerTypes(r.TypeDefinitions);t.registerServiceMethods(r.Methods);n.registerService(r)}e.registerService=u;function c(e){return n.remoteMethod(e)}e.remoteMethod=c})(Internals=exports.Internals||(exports.Internals={}));Internals.registerActivators({"Gluon.Schema.Delete":function(){return"Delete"},"Gluon.Schema.Get":function(){return"Get"},"Gluon.Schema.Post":function(){return"Post"},"Gluon.Schema.Put":function(){return"Put"},"Gluon.Schema.HttpCallingConvention":function(e,t){return{tag:"HttpCallingConvention",Item1:e,path:t}},"Gluon.Schema.ArrayType":function(e){return{tag:"ArrayType",Item:e}},"Gluon.Schema.BooleanType":function(){return{tag:"BooleanType"}},"Gluon.Schema.BytesType":function(){return{tag:"BytesType"}},"Gluon.Schema.DateTimeType":function(){return{tag:"DateTimeType"}},"Gluon.Schema.DoubleType":function(){return{tag:"DoubleType"}},"Gluon.Schema.IntType":function(){return{tag:"IntType"}},"Gluon.Schema.JsonType":function(){return{tag:"JsonType"}},"Gluon.Schema.ListType":function(e){return{tag:"ListType",Item:e}},"Gluon.Schema.OptionType":function(e){return{tag:"OptionType",Item:e}},"Gluon.Schema.SequenceType":function(e){return{tag:"SequenceType",Item:e}},"Gluon.Schema.StringDictType":function(e){return{tag:"StringDictType",Item:e}},"Gluon.Schema.StringType":function(){return{tag:"StringType"}},"Gluon.Schema.TupleType":function(e){return{tag:"TupleType",Item:e}},"Gluon.Schema.TypeReference":function(e){return{tag:"TypeReference",Item:e}},"Gluon.Schema.Parameter":function(e,t){return{ParameterName:e,ParameterType:t}},"Gluon.Schema.Method":function(e,t,n,r){return{CallingConvention:e,MethodName:t,MethodParameters:n,MethodReturnType:r}},"Gluon.Schema.EnumCase":function(e,t){return{EnumCaseName:e,EnumCaseValue:t}},"Gluon.Schema.Enum":function(e,t){return{EnumName:e,EnumCases:t}},"Gluon.Schema.Field":function(e,t){return{FieldName:e,FieldType:t}},"Gluon.Schema.Record":function(e,t){return{RecordName:e,RecordFields:t}},"Gluon.Schema.UnionCase":function(e,t){return{CaseName:e,CaseFields:t}},"Gluon.Schema.Union":function(e,t){return{UnionName:e,UnionCases:t}},"Gluon.Schema.DefineEnum":function(e){return{tag:"DefineEnum",Item:e}},"Gluon.Schema.DefineRecord":function(e){return{tag:"DefineRecord",Item:e}},"Gluon.Schema.DefineUnion":function(e){return{tag:"DefineUnion",Item:e}},"Gluon.Schema.Service":function(e,t){return{Methods:e,TypeDefinitions:t}}});Internals.registerTypeDefinitions([["DefineUnion",{UnionName:"Gluon.Schema.HttpMethod",UnionCases:[{CaseName:"Delete",CaseFields:[]},{CaseName:"Get",CaseFields:[]},{CaseName:"Post",CaseFields:[]},{CaseName:"Put",CaseFields:[]}]}],["DefineUnion",{UnionName:"Gluon.Schema.CallingConvention",UnionCases:[{CaseName:"HttpCallingConvention",CaseFields:[{FieldName:"Item1",FieldType:["TypeReference","Gluon.Schema.HttpMethod"]},{FieldName:"path",FieldType:["StringType"]}]}]}],["DefineUnion",{UnionName:"Gluon.Schema.DataType",UnionCases:[{CaseName:"ArrayType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"BooleanType",CaseFields:[]},{CaseName:"BytesType",CaseFields:[]},{CaseName:"DateTimeType",CaseFields:[]},{CaseName:"DoubleType",CaseFields:[]},{CaseName:"IntType",CaseFields:[]},{CaseName:"JsonType",CaseFields:[]},{CaseName:"ListType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"OptionType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"SequenceType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"StringDictType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"StringType",CaseFields:[]},{CaseName:"TupleType",CaseFields:[{FieldName:"Item",FieldType:["ListType",["TypeReference","Gluon.Schema.DataType"]]}]},{CaseName:"TypeReference",CaseFields:[{FieldName:"Item",FieldType:["StringType"]}]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Parameter",RecordFields:[{FieldName:"ParameterName",FieldType:["StringType"]},{FieldName:"ParameterType",FieldType:["TypeReference","Gluon.Schema.DataType"]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Method",RecordFields:[{FieldName:"CallingConvention",FieldType:["TypeReference","Gluon.Schema.CallingConvention"]},{FieldName:"MethodName",FieldType:["StringType"]},{FieldName:"MethodParameters",FieldType:["ListType",["TypeReference","Gluon.Schema.Parameter"]]},{FieldName:"MethodReturnType",FieldType:["OptionType",["TypeReference","Gluon.Schema.DataType"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.EnumCase",RecordFields:[{FieldName:"EnumCaseName",FieldType:["StringType"]},{FieldName:"EnumCaseValue",FieldType:["IntType"]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Enum",RecordFields:[{FieldName:"EnumName",FieldType:["StringType"]},{FieldName:"EnumCases",FieldType:["ListType",["TypeReference","Gluon.Schema.EnumCase"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Field",RecordFields:[{FieldName:"FieldName",FieldType:["StringType"]},{FieldName:"FieldType",FieldType:["TypeReference","Gluon.Schema.DataType"]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Record",RecordFields:[{FieldName:"RecordName",FieldType:["StringType"]},{FieldName:"RecordFields",FieldType:["ListType",["TypeReference","Gluon.Schema.Field"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.UnionCase",RecordFields:[{FieldName:"CaseName",FieldType:["StringType"]},{FieldName:"CaseFields",FieldType:["ListType",["TypeReference","Gluon.Schema.Field"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Union",RecordFields:[{FieldName:"UnionName",FieldType:["StringType"]},{FieldName:"UnionCases",FieldType:["ListType",["TypeReference","Gluon.Schema.UnionCase"]]}]}],["DefineUnion",{UnionName:"Gluon.Schema.TypeDefinition",UnionCases:[{CaseName:"DefineEnum",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.Enum"]}]},{CaseName:"DefineRecord",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.Record"]}]},{CaseName:"DefineUnion",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.Union"]}]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Service",RecordFields:[{FieldName:"Methods",FieldType:["ListType",["TypeReference","Gluon.Schema.Method"]]},{FieldName:"TypeDefinitions",FieldType:["ListType",["TypeReference","Gluon.Schema.TypeDefinition"]]}]}]]);
//# sourceMappingURL=dist/Gluon.min.js.map
var __awaiter=(this&&this.__awaiter)||function(d,a,c,b){return new (c||(c=Promise))(function(h,f){function e(k){try{i(b.next(k))}catch(j){f(j)}}function g(k){try{i(b["throw"](k))}catch(j){f(j)}}function i(j){j.done?h(j.value):new c(function(k){k(j.value)}).then(e,g)}i((b=b.apply(d,a)).next())})};var __generator=(this&&this.__generator)||function(g,b){var a={label:0,sent:function(){if(e[0]&1){throw e[1]}return e[1]},trys:[],ops:[]},c,i,e;return{next:h(0),"throw":h(1),"return":h(2)};function h(f){return function(j){return d([f,j])}}function d(j){if(c){throw new TypeError("Generator is already executing.")}while(a){try{if(c=1,i&&(e=i[j[0]&2?"return":j[0]?"throw":"next"])&&!(e=e.call(i,j[1])).done){return e}if(i=0,e){j=[0,e.value]}switch(j[0]){case 0:case 1:e=j;break;case 4:a.label++;return{value:j[1],done:false};case 5:a.label++;i=j[1];j=[0];continue;case 7:j=a.ops.pop();a.trys.pop();continue;default:if(!(e=a.trys,e=e.length>0&&e[e.length-1])&&(j[0]===6||j[0]===2)){a=0;continue}if(j[0]===3&&(!e||(j[1]>e[0]&&j[1]<e[3]))){a.label=j[1];break}if(j[0]===6&&a.label<e[1]){a.label=e[1];e=j;break}if(e&&a.label<e[2]){a.label=e[2];a.ops.push(j);break}if(e[2]){a.ops.pop()}a.trys.pop();continue}j=b.call(g,a)}catch(f){j=[6,f];i=0}finally{c=e=0}}if(j[0]&5){throw j[1]}return{value:j[0]?j[1]:void 0,done:true}}};var Gluon;(function(a){var b;(function(i){var g=(function(){function l(){}return l}());i.Parameter=g;var f=(function(){function l(){}return l}());i.Method=f;var d=(function(){function l(){}return l}());i.EnumCase=d;var c=(function(){function l(){}return l}());i.Enum=c;var e=(function(){function l(){}return l}());i.Field=e;var h=(function(){function l(){}return l}());i.Record=h;var k=(function(){function l(){}return l}());i.UnionCase=k;var j=(function(){function l(){}return l}());i.Union=j})(b=a.Schema||(a.Schema={}))})(Gluon||(Gluon={}));(function(t){var y;(function(V){function W(Z){return Z}V.some=W;function T(Z){return Z!==undefined&&Z!==null}V.isSome=T;function U(){return null}V.none=U;function S(Z){return Z===undefined||Z===null}V.isNone=S;function R(Z){return T(Z)?(Z[0]):null}V.fromJSON=R;function X(Z){return T(Z)?[Z]:null}V.toJSON=X;function Y(aa,Z){return T(aa)?aa:Z}V.withDefault=Y})(y=t.Option||(t.Option={}));var n=(function(){function R(){this.data={}}R.prototype.check=function(S){if(typeof S!=="string"){throw new Error("Invalid or null key")}};R.prototype.containsKey=function(S){this.check(S);return this.data.hasOwnProperty(S)};R.prototype.forEach=function(T){for(var S in this.data){if(this.data.hasOwnProperty(S)){T(S,this.data[S])}}};R.prototype.copy=function(){var S=new R();this.forEach(function(U,T){return S.setAt(U,T)});return S};R.prototype.at=function(S){this.check(S);if(this.data.hasOwnProperty(S)){return this.data[S]}else{throw new Error("Missing key: "+S)}};R.prototype.tryFind=function(S){this.check(S);return this.data.hasOwnProperty(S)?this.data[S]:null};R.prototype.setAt=function(S,T){this.check(S);this.data[S]=T};R.prototype.toJSON=function(){return this.data};return R}());t.Dict=n;var i;(function(S){function R(T){switch(T.tag){case"ArrayType":return[T.Item];case"ListType":return[T.Item];case"OptionType":return[T.Item];case"SequenceType":return[T.Item];case"StringDictType":return[T.Item];case"TupleType":return T.Item;default:return[]}}S.children=R})(i||(i={}));function l(){return{visitDataType:function(R){},visitRecord:function(R){},visitUnion:function(R){},visitEnum:function(R){}}}function O(R,S){S.visitDataType(R);i.children(R).forEach(function(T){return O(T,S)})}function Q(R,V){function U(Z){O(Z.FieldType,V)}function W(Z){V.visitRecord(Z);Z.RecordFields.forEach(U)}function S(Z){Z.CaseFields.forEach(U)}function Y(Z){V.visitUnion(Z);Z.UnionCases.forEach(S)}function T(Z){V.visitEnum(Z)}function X(Z){switch(Z.tag){case"DefineUnion":return Y(Z.Item);case"DefineRecord":return W(Z.Item);case"DefineEnum":return T(Z.Item);default:throw new Error("match failed")}}R.forEach(X)}function P(R,T){function U(V){O(V.ParameterType,T)}function S(V){V.MethodParameters.forEach(U);if(V.MethodParameters.length>1){var W=J(V.MethodParameters.map(function(X){return X.ParameterType}));O(W,T)}if(!!V.MethodReturnType){O(V.MethodReturnType,T)}}R.forEach(S)}function j(R){function S(T){switch(T.tag){case"ArrayType":return[":array",S(T.Item)];case"BooleanType":return":bool";case"BytesType":return":bytes";case"DateTimeType":return":datetime";case"DoubleType":return":double";case"IntType":return":int";case"JsonType":return":json";case"ListType":return[":list",S(T.Item)];case"OptionType":return[":option",S(T.Item)];case"SequenceType":return[":seq",S(T.Item)];case"StringDictType":return[":sdict",S(T.Item)];case"StringType":return":str";case"TupleType":return[":tup"].concat(T.Item.map(function(U){return S(U)}));case"TypeReference":return T.Item;default:throw new Error("match failed")}}return JSON.stringify(S(R))}function K(R){switch(R.tag){case"DefineEnum":return R.Item.EnumName;case"DefineRecord":return R.Item.RecordName;case"DefineUnion":return R.Item.UnionName;default:throw new Error("match failed")}}function s(S,R){return S.TypeDefinitions.filter(function(T){return K(T)===R})[0]}var d={init:function(R){},toJSON:function(R){return R},fromJSON:function(R){return R}};function F(R){if(isFinite(R)){return R}else{return String(R)}}function m(R){return Number(R)}var x={init:function(R){},toJSON:F,fromJSON:m};var k={init:function(R){},toJSON:function(R){var S=R.toISOString();if(R.unspecified){S=S.substring(0,S.length-1)}return S},fromJSON:function(S){var T=S.charAt(S.length-1).toLowerCase()!="z";var R=new Date(S);R.unspecified=T;return R}};var A={init:function(R){},toJSON:function(R){return R},fromJSON:function(R){return R}};function c(R){var T="";for(var S=0;S<R.length;S++){T=T+String.fromCharCode(R[S])}return btoa(T)}function b(R){var T=atob(R);var U=new Uint8Array(T.length);for(var S=0;S<U.length;S++){U[S]=T.charCodeAt(S)}return U}var f={init:function(R){},toJSON:function(R){return c(R)},fromJSON:function(R){return b(R)}};var H={init:function(R){},toJSON:function(R){return R},fromJSON:function(R){return R}};var a=(function(){function R(S){this.element=S}R.prototype.init=function(S){this.inner=S.getSerializer(this.element)};R.prototype.toJSON=function(T){var S=this;return T.map(function(U){return S.inner.toJSON(U)})};R.prototype.fromJSON=function(T){var S=this;return T.map(function(U){return S.inner.fromJSON(U)})};return R}());var o=(function(){function R(S){this.element=S}R.prototype.init=function(S){this.inner=S.getSerializer(this.element)};R.prototype.toJSON=function(T){var S=this;var U={};T.forEach(function(V,W){U[V]=S.inner.toJSON(W)});return U};R.prototype.fromJSON=function(S){var U=new n();for(var T in S){U.setAt(T,this.inner.fromJSON(S[T]))}return U};return R}());var z=(function(){function R(S){this.element=S}R.prototype.init=function(S){this.inner=S.getSerializer(this.element)};R.prototype.toJSON=function(S){return S===null?null:[this.inner.toJSON(S)]};R.prototype.fromJSON=function(S){return S===null?null:this.inner.fromJSON(S[0])};return R}());var I=(function(){function R(S){this.elements=S}R.prototype.length=function(){return this.elements.length};R.prototype.init=function(S){this.inner=this.elements.map(function(T){return S.getSerializer(T)})};R.prototype.toJSON=function(V){var T=this.length();var U=new Array(T);for(var S=0;S<T;S++){U[S]=this.inner[S].toJSON(V[S])}return U};R.prototype.fromJSON=function(T){var U=this.length();var V=new Array(U);for(var S=0;S<U;S++){V[S]=this.inner[S].fromJSON(T[S])}return V};return R}());function e(R){switch(R.tag){case"ArrayType":return new a(R.Item);case"ListType":return new a(R.Item);case"SequenceType":return new a(R.Item);case"BooleanType":return d;case"BytesType":return f;case"DateTimeType":return k;case"DoubleType":return x;case"IntType":return x;case"JsonType":return A;case"OptionType":return new z(R.Item);case"StringDictType":return new o(R.Item);case"StringType":return H;case"TupleType":return new I(R.Item);default:throw new Error("Invalid DataType")}}var M=(function(){function R(){this.activators=new n()}R.prototype.registerActivators=function(T){var S=this;T.forEach(function(U){S.activators.setAt(U.typeId,U)})};R.prototype.fullCaseName=function(U,S){var T=U.lastIndexOf(".");if(T===-1){return S}else{return U.substr(0,T)+"."+S}};R.prototype.createRecord=function(T,S){return this.activators.at(T).createInstance(S)};R.prototype.createUnion=function(U,T,S){return this.activators.at(this.fullCaseName(U,T)).createInstance(S)};return R}());var p=(function(){function R(){}R.prototype.init=function(S){};R.prototype.toJSON=function(S){return S};R.prototype.fromJSON=function(S){return S};return R}());var C=(function(){function R(S,T){this.record=S;this.typeRegistry=T}R.prototype.init=function(S){this.fields=this.record.RecordFields.map(function(T){return{name:T.FieldName,ser:S.getSerializer(T.FieldType)}})};R.prototype.toJSON=function(T){var S={};this.fields.forEach(function(U){S[U.name]=U.ser.toJSON(T[U.name])});return S};R.prototype.fromJSON=function(V){var W=this.fields.length;var S=new Array(W);for(var U=0;U<W;U++){var T=this.fields[U];S[U]=T.ser.fromJSON(V[T.name])}return this.typeRegistry.createRecord(this.record.RecordName,S)};return R}());var r=(function(){function R(){}return R}());var g=(function(){function R(){}return R}());var N=(function(){function R(T,S){this.union=T;this.typeRegistry=S}R.prototype.init=function(S){this.cases=this.union.UnionCases.map(function(T){return{caseName:T.CaseName,fields:T.CaseFields.map(function(U){return{fieldName:U.FieldName,fieldSerializer:S.getSerializer(U.FieldType)}})}})};R.prototype.findCase=function(U){for(var T=0;T<this.cases.length;T++){var S=this.cases[T];if(S.caseName===U){return S}}};R.prototype.toJSON=function(Z){var U=typeof Z==="string";var W=U?Z:Z.tag;var X=this.findCase(W);if(X!==undefined){if(U){return[W]}else{var V=new Array(X.fields.length+1);V[0]=W;for(var T=0;T<X.fields.length;T++){var S=X.fields[T];var Y=Z[S.fieldName];V[T+1]=S.fieldSerializer.toJSON(Y)}return V}}return null};R.prototype.fromJSON=function(W){var T=this.findCase(W[0]);if(T!==undefined){var S=new Array(W.length-1);for(var V=0;V<S.length;V++){var U=T.fields[V];S[V]=U.fieldSerializer.fromJSON(W[V+1])}return this.typeRegistry.createUnion(this.union.UnionName,T.caseName,S)}else{return null}};return R}());function L(R){return{tag:"TypeReference",Item:R}}function J(R){return{tag:"TupleType",Item:R}}var G=(function(){function R(){this.dict=new n();this.registry=new M()}R.prototype.add=function(S,U){var T=j(S);this.dict.setAt(T,U)};R.prototype.getSerializer=function(S){var T=j(S);return this.dict.at(T)};R.prototype.contains=function(S){var T=j(S);return this.dict.containsKey(T)};R.prototype.init=function(){var S=this;this.dict.forEach(function(T,U){U.init(S)})};R.prototype.registerActivators=function(S){this.registry.registerActivators(S)};R.prototype.createVisitor=function(){var S=this;var U=l();var T=function(V){if(!S.contains(V)){S.add(V,e(V))}};U.visitDataType=function(V){if(V.tag!=="TypeReference"){T(V)}};U.visitRecord=function(W){var V=L(W.RecordName);S.add(V,new C(W,S.registry))};U.visitUnion=function(W){var V=L(W.UnionName);S.add(V,new N(W,S.registry))};U.visitEnum=function(W){var V=L(W.EnumName);S.add(V,new p())};return U};R.prototype.registerTypes=function(S){Q(S,this.createVisitor());this.init()};R.prototype.registerServiceMethods=function(S){P(S,this.createVisitor());this.init()};return R}());var h=(function(){function R(S,T){if(S===void 0){S=new q()}this.httpClient=S;if(!T){this.prefix="/gluon-api"}else{this.prefix=T}}return R}());t.Client=h;var q=(function(){function R(){}R.serialize=function(T,V){var W=[];for(var U in Object.keys(T)){if(T.hasOwnProperty(U)){var S=V?V+"["+U+"]":U,X=T[U];W.push((X!==null&&typeof X==="object")?this.serialize(X,S):encodeURIComponent(S)+"="+encodeURIComponent(X))}}return W.join("&")};R.prototype.httpGet=function(U,T,S){if(T===void 0){T=null}return __awaiter(this,void 0,void 0,function(){var X,W,V;return __generator(this,function(Y){switch(Y.label){case 0:X=T===null?U:U+"?"+R.serialize(T);return[4,window.fetch(X,{method:"GET",headers:new Headers({Accept:"application/json"})})];case 1:W=Y.sent();return[4,W.json()];case 2:V=Y.sent();return[2,S(V)]}})})};R.prototype.httpCall=function(S,V,T,U){if(T===void 0){T=null}return __awaiter(this,void 0,void 0,function(){var X,Y,W;return __generator(this,function(Z){switch(Z.label){case 0:X=T!==null?{method:S,body:T,headers:new Headers({Accept:"application/json","Content-Type":"application/json"})}:{method:S};return[4,window.fetch(V,X)];case 1:Y=Z.sent();return[4,Y.json()];case 2:W=Z.sent();return[2,U(W)]}})})};return R}());t.FetchClient=q;var v=(function(){function R(){}R.prototype.httpGet=function(U,T,S){return Promise.resolve(jQuery.ajax({url:U,type:"get",data:T})).then(function(V){return S(V)})};R.prototype.httpCall=function(T,X,U,V){var S={url:X,type:T};if(y.isSome(U)){S.data=U;S.dataType="json";S.contentType="application/json"}var W=Promise.resolve(jQuery.ajax(S));if(y.isSome(V)){return W.then(function(Y){return V(Y)})}else{return W}};return R}());t.JQueryClient=v;var E;(function(W){function Y(Z){switch(Z){case"Get":return"get";case"Delete":return"delete";case"Post":return"post";case"Put":return"put";default:throw new Error("match failed")}}function X(Z){switch(Z.tag){case"HttpCallingConvention":return Z.Item1;default:throw new Error("match failed")}}function U(Z){switch(Z.tag){case"HttpCallingConvention":return Z.path;default:throw new Error("match failed")}}function T(Z,aa){return Z.prefix+"/"+U(aa.CallingConvention)}function S(aa,ab,Z){var ac={};ab.innerMethod.MethodParameters.forEach(function(ae,ad){ac[ae.ParameterName]=JSON.stringify(ab.parameterSerializers[ad].toJSON(Z[ad]))});return ac}function R(aa,ac,Z){var ab;if(ac.arity==0){return null}else{if(ac.arity==1){ab=Z[0]}else{ab=Z}}return JSON.stringify(ac.jointParametersSerializer.toJSON(ab))}function V(aa,ae,Z){function ad(ai){if(ae.doesReturn){var ah=ae.returnTypeSerializer.fromJSON(ai);return ah}else{return ai}}var ag=T(aa,ae.innerMethod);var ab=X(ae.innerMethod.CallingConvention);switch(ab){case"Get":var af=S(aa,ae,Z);return aa.httpClient.httpGet(ag,af,ad);default:var ac=R(aa,ae,Z);return aa.httpClient.httpCall(Y(ab),ag,ac,ad)}}W.remoteCall=V})(E||(E={}));var D=(function(){function R(S,T){this.innerMethod=T;this.arity=T.MethodParameters.length;switch(this.arity){case 0:break;case 1:var U=S.getSerializer(T.MethodParameters[0].ParameterType);this.jointParametersSerializer=U;this.parameterSerializers=[U];break;default:this.parameterSerializers=T.MethodParameters.map(function(V){return S.getSerializer(V.ParameterType)});this.jointParametersSerializer=S.getSerializer(J(T.MethodParameters.map(function(V){return V.ParameterType})));break}if(!!T.MethodReturnType){this.doesReturn=true;this.returnTypeSerializer=S.getSerializer(T.MethodReturnType)}else{this.doesReturn=false}}R.prototype.call=function(T,S){return E.remoteCall(T,this,S)};return R}());var w=(function(){function R(S){this.factory=S;this.table=new n()}R.prototype.registerService=function(T){var S=this;T.Methods.forEach(function(U){var V=new D(S.factory,U);S.table.setAt(U.MethodName,V)})};R.prototype.getProxy=function(S){return this.table.at(S)};R.prototype.remoteMethod=function(T){var S=this;return function(V){var W=S.getProxy(T);function U(){var X=arguments;return W.call(V,X)}return U}};return R}());var B;(function(ae){function R(aj,ak){return aj[ak+1]}function ad(ak){var aj=ak;return aj.slice(1)}function ag(aj){return aj[0]}function T(aj){switch(ag(aj)){case"ArrayType":return{tag:"ArrayType",Item:T(R(aj,0))};case"BooleanType":return{tag:"BooleanType"};case"BytesType":return{tag:"BytesType"};case"DateTimeType":return{tag:"DateTimeType"};case"DoubleType":return{tag:"DoubleType"};case"IntType":return{tag:"IntType"};case"JsonType":return{tag:"JsonType"};case"ListType":return{tag:"ListType",Item:T(R(aj,0))};case"OptionType":return{tag:"OptionType",Item:T(R(aj,0))};case"SequenceType":return{tag:"SequenceType",Item:T(R(aj,0))};case"StringDictType":return{tag:"StringDictType",Item:T(R(aj,0))};case"StringType":return{tag:"StringType"};case"TupleType":return{tag:"TupleType",Item:R(aj,0).map(T)};case"TypeReference":return{tag:"TypeReference",Item:R(aj,0)};default:throw new Error("failed to parse a data type")}}function V(aj){return{FieldName:aj.FieldName,FieldType:T(aj.FieldType)}}function af(aj){return{RecordName:aj.RecordName,RecordFields:aj.RecordFields.map(V)}}function ai(aj){return{CaseName:aj.CaseName,CaseFields:aj.CaseFields.map(V)}}function ah(aj){return{UnionName:aj.UnionName,UnionCases:aj.UnionCases.map(ai)}}function U(aj){return{EnumCaseName:aj.EnumCaseName,EnumCaseValue:aj.EnumCaseValue}}function aa(aj){return{EnumName:aj.EnumName,EnumCases:aj.EnumCases.map(U)}}function ac(aj){switch(ag(aj)){case"DefineRecord":return{tag:"DefineRecord",Item:af(R(aj,0))};case"DefineUnion":return{tag:"DefineUnion",Item:ah(R(aj,0))};case"DefineEnum":return{tag:"DefineEnum",Item:aa(R(aj,0))};default:throw new Error("error parsing type definition")}}ae.parseTypeDefinition=ac;function Z(aj){return{ParameterName:aj.ParameterName,ParameterType:T(aj.ParameterType)}}function W(ak){var aj=ag(ak);switch(aj){case"Delete":return aj;case"Get":return aj;case"Post":return aj;case"Put":return aj;default:throw new Error("error parsing http method")}}function S(aj){switch(ag(aj)){case"HttpCallingConvention":return{tag:"HttpCallingConvention",Item1:W(R(aj,0)),path:R(aj,1)};default:throw new Error("error parsing calling convention")}}function Y(aj,ak){return aj===null?null:ak(aj[0])}function X(ak){var aj=S(ak.CallingConvention);var al=ak.MethodName;var am=ak.MethodParameters.map(Z);var an=Y(ak.MethodReturnType,T);return{CallingConvention:aj,MethodName:al,MethodParameters:am,MethodReturnType:an}}function ab(aj){return{Methods:aj.Methods.map(X),TypeDefinitions:aj.TypeDefinitions.map(ac)}}ae.parseServiceSchema=ab})(B||(B={}));var u;(function(S){var Y=new G();var T=new w(Y);function Z(aa,ab){return Y.getSerializer({tag:"TypeReference",Item:aa}).toJSON(ab)}S.toJSON=Z;function R(ab,aa){return Y.getSerializer({tag:"TypeReference",Item:ab}).fromJSON(aa)}S.fromJSON=R;function U(ad){var aa=[];function ab(af,ae){aa.push({typeId:ac,createInstance:function(ag){return ae.apply(null,ag)}})}for(var ac in ad){ab(ac,ad[ac])}Y.registerActivators(aa)}S.registerActivators=U;function W(aa){var ab=aa.map(B.parseTypeDefinition);Y.registerTypes(ab)}S.registerTypeDefinitions=W;function V(aa){var ab=B.parseServiceSchema(aa);Y.registerTypes(ab.TypeDefinitions);Y.registerServiceMethods(ab.Methods);T.registerService(ab)}S.registerService=V;function X(aa){return T.remoteMethod(aa)}S.remoteMethod=X})(u=t.Internals||(t.Internals={}))})(Gluon||(Gluon={}));Gluon.Internals.registerActivators({"Gluon.Schema.Delete":function(){return"Delete"},"Gluon.Schema.Get":function(){return"Get"},"Gluon.Schema.Post":function(){return"Post"},"Gluon.Schema.Put":function(){return"Put"},"Gluon.Schema.HttpCallingConvention":function(a,b){return({tag:"HttpCallingConvention",Item1:a,path:b})},"Gluon.Schema.ArrayType":function(b){return({tag:"ArrayType",Item:b})},"Gluon.Schema.BooleanType":function(){return({tag:"BooleanType"})},"Gluon.Schema.BytesType":function(){return({tag:"BytesType"})},"Gluon.Schema.DateTimeType":function(){return({tag:"DateTimeType"})},"Gluon.Schema.DoubleType":function(){return({tag:"DoubleType"})},"Gluon.Schema.IntType":function(){return({tag:"IntType"})},"Gluon.Schema.JsonType":function(){return({tag:"JsonType"})},"Gluon.Schema.ListType":function(b){return({tag:"ListType",Item:b})},"Gluon.Schema.OptionType":function(b){return({tag:"OptionType",Item:b})},"Gluon.Schema.SequenceType":function(b){return({tag:"SequenceType",Item:b})},"Gluon.Schema.StringDictType":function(b){return({tag:"StringDictType",Item:b})},"Gluon.Schema.StringType":function(){return({tag:"StringType"})},"Gluon.Schema.TupleType":function(b){return({tag:"TupleType",Item:b})},"Gluon.Schema.TypeReference":function(b){return({tag:"TypeReference",Item:b})},"Gluon.Schema.Parameter":function(c,d){return({ParameterName:c,ParameterType:d})},"Gluon.Schema.Method":function(e,f,g,h){return({CallingConvention:e,MethodName:f,MethodParameters:g,MethodReturnType:h})},"Gluon.Schema.EnumCase":function(c,d){return({EnumCaseName:c,EnumCaseValue:d})},"Gluon.Schema.Enum":function(c,d){return({EnumName:c,EnumCases:d})},"Gluon.Schema.Field":function(c,d){return({FieldName:c,FieldType:d})},"Gluon.Schema.Record":function(c,d){return({RecordName:c,RecordFields:d})},"Gluon.Schema.UnionCase":function(c,d){return({CaseName:c,CaseFields:d})},"Gluon.Schema.Union":function(c,d){return({UnionName:c,UnionCases:d})},"Gluon.Schema.DefineEnum":function(b){return({tag:"DefineEnum",Item:b})},"Gluon.Schema.DefineRecord":function(b){return({tag:"DefineRecord",Item:b})},"Gluon.Schema.DefineUnion":function(b){return({tag:"DefineUnion",Item:b})},"Gluon.Schema.Service":function(c,d){return({Methods:c,TypeDefinitions:d})}});Gluon.Internals.registerTypeDefinitions([["DefineUnion",{UnionName:"Gluon.Schema.HttpMethod",UnionCases:[{CaseName:"Delete",CaseFields:[]},{CaseName:"Get",CaseFields:[]},{CaseName:"Post",CaseFields:[]},{CaseName:"Put",CaseFields:[]}]}],["DefineUnion",{UnionName:"Gluon.Schema.CallingConvention",UnionCases:[{CaseName:"HttpCallingConvention",CaseFields:[{FieldName:"Item1",FieldType:["TypeReference","Gluon.Schema.HttpMethod"]},{FieldName:"path",FieldType:["StringType"]}]}]}],["DefineUnion",{UnionName:"Gluon.Schema.DataType",UnionCases:[{CaseName:"ArrayType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"BooleanType",CaseFields:[]},{CaseName:"BytesType",CaseFields:[]},{CaseName:"DateTimeType",CaseFields:[]},{CaseName:"DoubleType",CaseFields:[]},{CaseName:"IntType",CaseFields:[]},{CaseName:"JsonType",CaseFields:[]},{CaseName:"ListType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"OptionType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"SequenceType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"StringDictType",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.DataType"]}]},{CaseName:"StringType",CaseFields:[]},{CaseName:"TupleType",CaseFields:[{FieldName:"Item",FieldType:["ListType",["TypeReference","Gluon.Schema.DataType"]]}]},{CaseName:"TypeReference",CaseFields:[{FieldName:"Item",FieldType:["StringType"]}]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Parameter",RecordFields:[{FieldName:"ParameterName",FieldType:["StringType"]},{FieldName:"ParameterType",FieldType:["TypeReference","Gluon.Schema.DataType"]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Method",RecordFields:[{FieldName:"CallingConvention",FieldType:["TypeReference","Gluon.Schema.CallingConvention"]},{FieldName:"MethodName",FieldType:["StringType"]},{FieldName:"MethodParameters",FieldType:["ListType",["TypeReference","Gluon.Schema.Parameter"]]},{FieldName:"MethodReturnType",FieldType:["OptionType",["TypeReference","Gluon.Schema.DataType"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.EnumCase",RecordFields:[{FieldName:"EnumCaseName",FieldType:["StringType"]},{FieldName:"EnumCaseValue",FieldType:["IntType"]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Enum",RecordFields:[{FieldName:"EnumName",FieldType:["StringType"]},{FieldName:"EnumCases",FieldType:["ListType",["TypeReference","Gluon.Schema.EnumCase"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Field",RecordFields:[{FieldName:"FieldName",FieldType:["StringType"]},{FieldName:"FieldType",FieldType:["TypeReference","Gluon.Schema.DataType"]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Record",RecordFields:[{FieldName:"RecordName",FieldType:["StringType"]},{FieldName:"RecordFields",FieldType:["ListType",["TypeReference","Gluon.Schema.Field"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.UnionCase",RecordFields:[{FieldName:"CaseName",FieldType:["StringType"]},{FieldName:"CaseFields",FieldType:["ListType",["TypeReference","Gluon.Schema.Field"]]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Union",RecordFields:[{FieldName:"UnionName",FieldType:["StringType"]},{FieldName:"UnionCases",FieldType:["ListType",["TypeReference","Gluon.Schema.UnionCase"]]}]}],["DefineUnion",{UnionName:"Gluon.Schema.TypeDefinition",UnionCases:[{CaseName:"DefineEnum",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.Enum"]}]},{CaseName:"DefineRecord",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.Record"]}]},{CaseName:"DefineUnion",CaseFields:[{FieldName:"Item",FieldType:["TypeReference","Gluon.Schema.Union"]}]}]}],["DefineRecord",{RecordName:"Gluon.Schema.Service",RecordFields:[{FieldName:"Methods",FieldType:["ListType",["TypeReference","Gluon.Schema.Method"]]},{FieldName:"TypeDefinitions",FieldType:["ListType",["TypeReference","Gluon.Schema.TypeDefinition"]]}]}]]);